<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<body>
<div th:fragment="queue">
	<div th:if="${buildState != null}">
		<table class="table table-bordered table-striped">
			<tbody>
			<tr>
				<th>Queue</th>
			</tr>
			<tr th:each="queueEntry,status : ${buildState.queued}">
				<td>
					<span th:text="${queueEntry.pipelineId}"></span>
					<a th:href="@{'/queue/' + ${queueEntry.pipelineId} + '/remove/' + ${status.index}}">X</a>
				</td>
			</tr>
			<tr th:if="${#sets.isEmpty(buildState.queued)}">
				<td>Empty</td>
			</tr>
			</tbody>
		</table>

		<br/>

		<table class="table table-bordered table-striped">
			<tbody>
			<tr>
				<th colspan="2">Running</th>
			</tr>
			<tr th:each="currentEntry : ${buildState.current}">
				<td th:text="${currentEntry.key}"></td>
				<td>
					<div th:each="buildNr : ${currentEntry.value}" style="float: left; width: 100%;">
						<a th:href="@{'/pipelines/' + ${currentEntry.key} + '/builds/' + ${buildNr}}"
							 th:text="${buildNr}"></a>

						<a th:href="@{'/queue/' + ${currentEntry.key} + '/build/' + ${buildNr} + '/abort'}">X</a>
						<br/>
					</div>
				</td>
			</tr>
			<tr th:if="${#maps.isEmpty(buildState.current)}">
				<td colspan="2">None</td>
			</tr>
			</tbody>
		</table>
	</div>
</div>
</body>
</html>
